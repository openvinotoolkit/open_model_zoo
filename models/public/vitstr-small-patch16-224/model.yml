# Copyright (c) 2021 Intel Corporation
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description: >-
  The "vitstr-small-patch16-224" model is "small" version of the ViTSTR models. ViTSTR
  is a simple single-stage model that uses a pre-trained Vision Transformer (ViT)
  to perform Scene Text Recognition (ViTSTR). Small version of model has an embedding
  size of 384 and number of heads of 6. Model is able to recognize alphanumeric case
  sensitive text and special characters.

  More details provided in the paper <https://arxiv.org/abs/2105.08582> and repository
  <https://github.com/roatienza/deep-text-recognition-benchmark>.
task_type: optical_character_recognition
files:
  - name: timm-0.4.12-py3-none-any.whl
    size: 376973
    sha256: dba6b1702b7d24bf9f0f1c2fc394b4ee28f93cde5404f1dc732d63ccd00533b6
    source: https://files.pythonhosted.org/packages/90/fc/606bc5cf46acac3aa9bd179b3954433c026aaf88ea98d6b19f5d14c336da/timm-0.4.12-py3-none-any.whl
  - name: modules/vitstr.py
    size: 8363
    sha256: 6087e15cebb765987adba7c225393e11dd74375e15b29d7e3e221070958ee37b
    source: https://raw.githubusercontent.com/roatienza/deep-text-recognition-benchmark/c937d69388dbaa1c4a776badb2670344b39d0942/modules/vitstr.py
  - name: vitstr_small_patch16_224.pth
    size: 86086343
    sha256: 88812f6d9508fb6fcb58ead5329c02d82cfc5f9268e35471991ade5ba610d069
    source: https://github.com/roatienza/deep-text-recognition-benchmark/releases/download/v0.1.0/vitstr_small_patch16_224.pth
postprocessing:
  - $type: unpack_archive
    format: zip
    file: timm-0.4.12-py3-none-any.whl
conversion_to_onnx_args:
  - --model-path=$dl_dir
  - --model-path=$config_dir
  - --model-name=create_model
  - --import-module=model
  - --model-param=weights=r"$dl_dir/vitstr_small_patch16_224.pth"
  - --input-shape=1,1,224,224
  - --input-names=image
  - --output-names=logits
  - --output-file=$conv_dir/vitstr-small-patch16-224.onnx
model_optimizer_args:
  - --input_shape=[1,1,224,224]
  - --input=image
  - --input_model=$conv_dir/vitstr-small-patch16-224.onnx
  - --scale_values=image[255]
  - --output=logits
framework: pytorch
license: https://raw.githubusercontent.com/roatienza/deep-text-recognition-benchmark/master/LICENSE.md
